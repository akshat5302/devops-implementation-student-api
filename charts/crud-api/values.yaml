dockerRegistry:
  enabled: false
  registry: docker.io
  loginid: akshat5302
  password: ''
ingress:
  enabled: false
  appHost: "" # Frontend hostname
  api: "" # API hostname
  ingressClass: nginx
  clientMaxBodySize: 5m

frontend:
  enabled: true
  image:
    repository: akshat5302/student-crud-frontend
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 1
  apiUrl: "http://localhost:3000/api/v1" # If empty, will use http://student-crud-api-api:3000/api/v1 (Kubernetes service DNS)
  checkApiConnectivity: false # Enable API connectivity check at startup (for testing failures)
  failOnApiUnreachable: false # Exit container if API is unreachable (causes CrashLoopBackOff when enabled)
  apiCheckRetries: 3 # Number of retries before giving up
  apiCheckDelay: 2 # Delay between retries in seconds
  nodeSelector:
    type: application
  tolerations:
  - key: "type"
    operator: "Equal"
    value: "application"
    effect: "NoSchedule"
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  serviceAccount: ""

api:
  enabled: true
  image:
    repository: akshat5302/student-crud-api
    tag: latest
  nodeSelector:
    type: application
  tolerations:
  - key: "type"
    operator: "Equal"
    value: "application"
    effect: "NoSchedule"
  replicaCount: 1
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  livenessProbe:
    httpGet:
      path: /api/v1/health
      port: 3000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /api/v1/health
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
  initContainer:
    image:
      repository: akshat5302/student-crud-api
      tag: latest

postgres:
  local_setup: true
  image: postgres:15.7-alpine
  servicePort: 5432
  remote_db_url: ""
  pgDb: student_db
  pgUser: akshat
  pgPassword: 12345
  storageClass: standard
  volumeSize: 1Gi
  pullPolicy: IfNotPresent
  assign_cluster_ip: false
  nodeSelector:
    type: database
  tolerations:
  - key: "type"
    operator: "Equal"
    value: "database"
    effect: "NoSchedule"

externalSecret:
  enabled: false
  refreshInterval: "1h"
  target:
    name: "api-db-secrets"
    creationPolicy: "Owner"
  data:
  - secretKey: "POSTGRES_USER"
    remoteRef:
      key: "kv/postgres-secret"
      property: "POSTGRES_USER"
  - secretKey: "POSTGRES_PASSWORD"
    remoteRef:
      key: "kv/postgres-secret"
      property: "POSTGRES_PASSWORD"
  - secretKey: "POSTGRES_DB"
    remoteRef:
      key: "kv/postgres-secret"
      property: "POSTGRES_DB"
  - secretKey: "DATABASE_URL"
    remoteRef:
      key: "kv/postgres-secret"
      property: "DATABASE_URL"

vault_setup:
  secretStore:
    name: vault-backend
  server: "http://vault-setup.vault.svc.cluster.local:8200"
  path: "kv"
  version: "v2"
  auth:
    tokenSecretRef:
      name: "vault-token-secret"
      key: "vault-token"
networkPolicy:
  enabled: false
